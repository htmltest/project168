$(document).ready(function() {

    var img = new Image();
    var imgWidth  = 0;
    var imgHeight = 0;
    var TO_RADIANS = Math.PI/180;
    
    var logos = [
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAoCAYAAABuIqMUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4OThGRDlCMTFEMkExMUVCODc5Q0EzQkRENEJBRDczQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4OThGRDlCMjFEMkExMUVCODc5Q0EzQkRENEJBRDczQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5OEZEOUFGMUQyQTExRUI4NzlDQTNCREQ0QkFENzNBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg5OEZEOUIwMUQyQTExRUI4NzlDQTNCREQ0QkFENzNBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4m29lgAADeZJREFUeNrMWXl0VNUZ//LmTSYzk2UmycxkNQkBAsFAyiIoO4LiAlpQLLhRd9FyKta2VvEc9bSHWq37LtLSYpVWthQEQUTBBExBNEIwIftCkslkn8ns0+8Ov1dvB6td/uk953fey5337vvut/y+77uJW7xkOfkDfvK4PfTsM0+8WFpy/qqjxz+vfHTt2ofKKyr2rl7zAClxKm1a/yq5us6QKTGJ/l+GYsuwUUqqhYrHF9tY8Ftb29upx+WasqNsx/vrnnzqd+FQkLqdTgr4/OLx/+obDMM3zIs59X8S/suTp+h0QyNtL3vPuf/AR1/kZGVR1Zdf0pGqk/T9Zctuvu4H1+0zmoykxMdTKBRIj4uLO8DvnWZ0MLZjnSWMCONexs8YYcYERgmjl+FlfMXIwfMfYE7gFkYco5xRg98vZnQy2hhPY+4prCXW+A3jlNLf4yTPQC91tjfTxrfePi6eSkm2UGXl38jL2lYSEi6+/e7b3pl3ySUUCIYioVBoNj9SyBCmWMxYzUjEBwoYIyHMOMavGMmMLYzRjPsYdzHmMd5lNDNeYUxnjAKEpSYx7IwsxgKsnc2wMBbiO0WKPS2NbNZUmjVtGm0p22XevnM33XTDcqo+eYIqyg9Tb98Apdtsy1bceMOSZGuqyz04IBZqZazFouID8bgPA5pbWHEvBPw142/4sBifMG5gvA6B9ZhPgcXECGBDYgzhehnDEXWbxFQbCdjzR5DZYNh09ZWXU2tHJz328IORppZm8ng81NXZRVMvmvqz6bPn5PZ7PH0w3WNY7K+SwPIQG/wQ928zNjP+xDiOud/CPe5hVEFoMdIg8CDjUygmneHG7zMZUxhBpbqulgQ+riin/KKijumLr6V5CxbuKf/k8KGLF8ynzi4ntbWfEWq8YNz4koUhojPs98TIwGLN8PfYkQ7rPMxIZRxFPPwJ8dADBeyG1ofxngMuJwTfL7mjD/cWWNWjpFtSScCeYiWrxWoqGjuGfTsQWHzlZbOeXrduy+TS8VRSUkI1Z7po0pQL5s+ZMTPXPeSuC4dCd2OxOyUakjchOPUCRgNcRoyljNnQ+CpGHeNS+HUn3ERzQxFXcyXhNdc89g+2GVlYQAITSieQ2ZSQcWj/frJnZF5pNpmyNr7x6tLLF16Rs/L6FY+crqkJhsPhBX6fN0GnxEVY9UGsocdHNT/XPuJiPMrYxDiIOR+EFS6jY2zDfCJcz8PIx5riehF+L8IzPjBVVHYlxZFJApn5hRQIh3NbW1to2B+kNHvGRRdOn0FTpk1ts2flHM3Py1OfefKJl8orKyvNZvNAnKIMS9r+KxYWTLKS0Qc22Y1nXpMoUrt/DkxVyzgC2myAWwi2epwxS3LBINbdCZruU03msxkzMcUimCXPy2zS7eymXEfmbXmjxz4ya+aM4rzCkeGWMx2Rwf6B1806dQ+bQJi2G/yuR7IR9HcjNvERI5Oxl/EQo5TxOWMrI4T3FsBSf2T0M34JAYX272CcxDduQLAGQQD9CHKjkma1kC0tlawpieR2D+VHwhHyhYPkyMy4dO97O0tW3fpD3cnqU/qhIfc+dhYyxOsdMKHg7avACreAw7fBj0XC+RHjScZGBO0IaNIOuhOJ7lbGJeDu3VgvE/R5PaBi8wITIbj4Tpb6KScjwR46vZ46OzrtiSkpZOH6xRsIUvG4Erp4zaU0a85sKtv8zrETVVX+VEuyyHKnGAnYwBEwTg4YpAva2wEKtCIYd2OjIuA+ZrQgcIWbvAirfYGNL4I7iljJQCZPAIUKK8xhVCvdDbXkrK+h3vpaspqMuyM6PamqyiVCNbUz3xeOHk2ivmlubjrl8Q8PqzqdjV/8ktEIHx2JDxwFwxggpJmRK8zLyIO5fRBqBPj8MOP7YBYh9Dqsp7HQIKwslFUBF3XimVKlsCCfBIpGjaSC3KzHTPHqbW6vhwzGBKo7cZx+et/9TKEpxHVBG0eRLkwRLUkJLdRjE6ImaYfgbtBdHOYT4K8EJhKWaELQTWUMoDwQ1lvBuA4WvBec7wZVKmC1NCS6zao/eHZdXcBHHq+PTEbj+ty8vKMGs/lIV3tHvLOtjfJsqZSd6WjVKUpcOBTOUXS6JCSeE/BXBYJOQUBOxgZUuJFgpivxvIINlCARCfaoZJyP98sYNmTSdlDoClijCMWZiJfJiiHeQGdhJIMhgYJcjIUG+o+nGo2Lx0+eREG/h6qrq6mqqqovHIl061U1Fe7hxnUsgiwJWvbDvIm4GhGoXriOGRsU2jSh2rRA0CwENGEd4TZnYLlUuIwObmrUuVw91FBfR6dP11JrSwsNuLqptamBWhsb6wLh0EUDrq7CCRNKB3eW7Xyip8flS0u1fhEKhWfCj4VZX8JiU1C+FiAQnwcvC9b5A6hyEZKPCNg3GNfCDUqh+TvgMnfBRYoh8DPYyBI8O0PUS6pqNJ3NNJEIu4yZrPazG1cVhZobGpyki6eKymPOvDHF/QP9/eQf9o4ine43UhlwEJy9HEI9gNrlY7jPMsbLCMzVeCcZnL0aSjiBeiaC3LAasSS0fzs2IuLjJsZbcKMXFAsnJwGuayg5KYkM+nguE0zkGXKnGpKSFk2YNYf6vb74SdNnKtk5OTw/qJW0Tbja4YMEAZJxPxqCEVxsrLThsTG10Ku45sKtCAntZamWT5GqWGHNnepgj+vc/sxgoI7WlvmK2Zw8Zeo00vmH0w4d2GflJObSGxLkejwP6MTcePi+JuAoScjJyJoKgtWM4MuXyusNUvUob64HeULTvMi6L6ilc+efI3wSU+PQrvcKuzs76K47bqe9WzYbX3/ltaTCTIdLp1c14cthPsG5BzA3GczihoBZYKFEMMy7oMsx0LIH78Xh6pS6Mnle5IVfgBDeRElxoTpr4eXnCG/jQq22ts6sY5aaVJBNZ8aNo7CnL+LqjFCqJSUnEIrS6+14PFOqKouQTA5iY4SaPFnqTbWmOw+sQ6j7n0O8vPMNvYEfWXUEgll0ZivVA7t2nPOkkYO4/nSNeVJxcfTvwhEj2nXxxiYuhbkJD+ZIghLMLndSbbDECik2kiWf1p4dCaFk99ABBAbTyutOMNUaEECUVtXqz46dI7yodVwdHUn2uXPONqnnnXfo3jX30x+ffybeHwiOVfVR5V2Ijn4ePl6HNN8BlyJJeK2XvQcCb8Dm9ZJmY8dy6b4c1lyDdlKMfWp/V/e5r4XDFBz2ppkSzwb+gDewLSMrRxxOcQI2aTWHgoa6C1QnqOwK3J8AXa6A3xrw4deg/XtApSI2fgDLrEe1uBtatmHtD5DMxGZfgEWeZRxS4b9fh3cEFlTiHBl2B9Ok33f9Ncs+bGyop7R0R184FDgIdlgrnRgsgKAbpaWuRqlsk9q3TrDFS5h7EH5uhf8LoR+RqJPQ966T3OsENkCqLcNxjuI5g+qHnc78vIIC2rdv/4GDH+zqUNiVRmTncp7WbeANrpTYIQFZcg8y4FYIuFyiORW1+Cak+RdwcPQTaR09csYrsNYr0LCW2PpwFZn4z0KBisOeQTLSU9MpOzd3UmZ2TmZvTw9tfPONfdEswVYIR8J6FnyhtE8HXEDWtna2oo250J42tPdlji5GIGrjGlxnx8TArdLfS9RTRyu/1jj7esjvp4nzL7mzuKSE6mq/oiOffPK+2ZTE3a5CkXA4HVomFFqRmPNGI3zaEnN+MygzMd5Jkea6Yw5CjeB7uzTnignsDNWclv5PLuP1+kb1DQysPK+oiLiWqfH7/V8kcdnAXsOaj768HT5XjQ/eJL1eH5MhY5MNIbOqSPPfw+YUNO7aaESys/yLNaKFgGpN/3pzkWBInE3m6E1GSoiPpwGft6afizGLVSUDd1g6ZtBQJHJtjCnnSH9vg0W+bSThmdXS3KVgHW2UIYD13yJ8RPH6uAnxeaMYGB6igN9XO3rMuJCd/X9ocLA9HAlRT6+TOrtdhJMyeYG10v3naOtyvkP4bzpdWxuTF96G68R920JqRoYtKlAoFIpeh91Drf29PYcd06ZOtyQnRc/V4+PNHA9BCnJMSMI/GFMpPiodIP0n42a0gdp4HFfrd57P19fVk8vZzUK7qd/VS32ME599ticS9NP8ufMmRI/EdDrKKeDkGaeLJrCYSlCM34Ei6bu0FfO7FVlaG3uQrP6ddUhpaWqir06epMaGBnJxedzLnVVTbc1Hu7ZsoZHjxpV+b+qMy/LHjydH0RiWO8QWCGla1limF4nmP3UVQkLS2CuIpvtfbTR2jTjVaDSSwpHY3e2k0WOL6arly6mtrX24bNs2Sndk0Hlji7d/UPHpUqs3UJbCDUtfd+ciLp1khlkKqiOJQmMFiPuG30Wy+bE0v0Jqagjl8rDUnJyzjnq2ElC4kjRTY+1p8d8PstjtP09MTqG9Zdto184y/S98/h3Hjldt/fUja5cEvL6f6/RasRfNjNNxMjACWbMcnKxpdE5MbFTj+rQ050YjMwkd2AYwTh3mCb2rHE/Nqjgp49RvMxj0BUOBQNbOrVvXDg30T+xubaDiiRfQmY5Omlg6gQJez6zm9uZV4XB4ZMKwh3Iys4kbdBsXQ4/HCFaO2lwL4L/EWOJ5qXGRuf/hmIRUhhrnRem/K/JYrw719lzFNbpIw/mRUHB040mXAU1w6NqlVyslEyfSnv0HRJJSXvv9W4vb2lqOHa6oUCoPfkxmlQNYp5XfUc3X4v4xmH0VgpvQUT2EKlFFk5KN4xB55ONEjlDAiSC7H+W2gkQo/te1/u8CDABW5O4NP9U9JgAAAABJRU5ErkJggg==',
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAoCAYAAABuIqMUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjg1QkIwM0YxMUQyQTExRUI4NUY1ODdDQzNEQzNBMTJDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjg1QkIwM0YyMUQyQTExRUI4NUY1ODdDQzNEQzNBMTJDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODVCQjAzRUYxRDJBMTFFQjg1RjU4N0NDM0RDM0ExMkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODVCQjAzRjAxRDJBMTFFQjg1RjU4N0NDM0RDM0ExMkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7PctPzAAAMSElEQVR42sxZaVRV1xU+773LJCAqgzIJihqVobpUjFOTCog4RKyKMU6JsWpNtavapu0ymsQpHZZm1S5tWk0sVtvEoSaw0EoqQnA5xIGgIgqaCA6AgODArLx++/W7ruMTtW3+9Kz1+a73nXvevnt/+zt7H1RKSoqaOHGiSkxMVGfPnt1kx8jLy/syOTk5oWvXrmr16tVq5cqVqqCgQOGr/ytYu3Tponx9fVV0dLR/VFTUnGvXrqnKyspBe/fuzVy1alXqgwcPVE1NjfoWwwq4t3Ff7hnfauH8/Hx18eJFtWfPnsqsrKwzISEh6vz580ruT5gwYdbUqVMP3r9/X5WXl8t8PyAX+BqoANK4ziTADiwCfsHr/kA0UAs0AEVAKOdn8V4TMAewAMeAS/w+DqgE5Ed/x3vrgTtACK8vWMWzMhobG9WuXbu+kmtvb2914sQJJd+5u7uPnDJlyidXrlxRNGo40E0eAcYDPwY8+QPhQASv+wJrZTlgD9AT+AmwAPgesAuQRf8IDONzEYzUADqqMxDP9YK41migK/CctWPHjqpDhw4qNjZWpaene6alpakZM2Y4vH/kyBF1+/ZtFRkZmQJ6TSouLq7mQteAFbwOBNx43UqYtOjIazHwPeA4X1zR0zOAD2iwC+/7MGIyWoAevK7jZxLQxUEbDPnH4W2bzbYDVFFlZWVq+fLl9tLSUlVXV6fu3r2rwsLC3mxoaOhKGkjoVnGxdOBBG5S8SnrI+ITel8883lsHJJBqZ2m0DF9G6S7wJeDKKJjGjwAGCeWsly9fVoJjx46pXr16lY8bN06NGjXqQC5GfHy8unnzpuNlEKFYRCgRD5VxkQDNyLaGH6OzjBE4yXz4GIgBJIrvAgdoYAOfE6pE0nDz5bsxP2R04Px6a0BAgBJ07txZVKdd7969hestiMALa9eu3dO/f38FFVIVFRUSgfhbt25J0l0GFnKxBQy7mRPmEH4OBkpIGRnfJ98T+bwk6ChGoII0CaZxQpeRfK4778k4/VBtevTooQT9+vVT7dq163Lo0CF5mXEeHh7B27ZtmzxmzJjg6dOnLy8pKbmPCCQgBzxo5H2uIVxt1nhu8l/U4m1gO3CE95po6G8pk6ZaeTFX6oEwrimfQ/h9L86R5w/yns0qySoQvW9ubg69fv26amlpkUgMiYuLU8OHD78RFBR02tXV1YDibOzWrVsOHrwJ3NMMyiBHXwOm8vu/A/s45/f8zGTyNvEFfgAUAEeZS4U00kLKDdeoUk/KplOlygxPz3+rnI+Pj6qtrQ2X5KyqqhLvzw0NDV0xePDgvjC4FXuBbL6b+XAIOTuW3nahR6fSsCOccwhYSo5v5MuIYVOAFxmlndTvtfS+cH8WUAzc4twmRjqLTpIk93BwXrzu7++voCZhra2tSjalwMDAxIyMjOi5c+faIJsuuP85uG+llncC+gDT+GOvAm8Cn5O7J4Af0ru7yXlJwheoJi/Ri4voANHuHBoqivYXYDYwE2gPDKT2y37wBpM83Dh+/LiyWCzKxcVFPB4gFPLy8hIKORJ19OjRaujQoWr79u2nkcxN9HgBPd6TqlBKT1fxx+oYoXOUwJsatSThsrlXjOT8dGp+PnCYm5+dLyT7yKeMUi+uLVErMKTgcrDfZhODM/ASQ+RF5L5Qqnv37o4XQbJegAqJl/2ZNH4sEyKoLCdpiBuN9GQ5cJnevEM1sVNJGujBv5I6hxkxKSMukIbbmAMXOD+SjpCo+1o7deqkBFKcQW3WwPBXJWHF8MLCQrVkyRJHPmAju4HvbUysUHrhGyZPEWngRs8Ek9tFjFALE8+VlLvC+c9zvSGMxDTWSbWkVGeu151y3EKnSYR2PlLVCdfbt2+fipc5BeNPQNvdpSCTF4OcXsOnhV5sz43nPDCGC4t3YrnbDuQLGPRUM3l+jnPlBfqxRNjHqEXxJfYxut8FbjBS0xnB54AaXsdadeOFOvX19erOnTvnII3jRfuFMkIhRKEWuVFFDnvRI96MQABfyJUFm6iP7AcSqXbc0uvoUS8qRxipdZGOKKPRfoxaE6l2g9c+FAMLaxsPG2p3JTW8QCRSINfQ9K8RiedRy/cYMGDA3fXr1/9GEnbQoEFn6KEQ/tgHNF5K4A2klCTUJkrdAm5U+VSVUJbVHwLJ1PBo8nghBeF1Rqs3I7eBeTRei9BuQ7olcxiG4SjSRH3k89KlS9USjVOnTlWizr8txRs9/b4WsKM0ahqvfwl8h5QYQBXZQi4v0oqvHO4BYsAZ7gUG5XYpxaCJkmsnJV+njIqEBhjBwcGPVVSgjBRkfuD/hJiYGKksXceOHWtF2dzK5FGsWcKYVGYTEUX6KMpomFbO9tZ+oo9WQiu+3AZG0+wNPqMEv89a3lz3AJ3kb5w7d+4x40UqUSbEQWW8sMNKHvjm5OR0nD9/frVWjx+mcV3JRUXveWsG9tSWHcQEt3CeF5NPNr01nPOhpkx6oSf028+Nazs9/wcjISHhMePhcZWZmdld8mHevHlq586dHmjOvUGlav6YSZfp1Oxs3htIPb5HAwMpl17k9m4mcx96ud4UOs1IT80UCz8jSEeR4lRSZ6iRlJT0mPFSHiNhPYX3ERERSspkCbHov9aHLtDasxat+pOX+oIvZvarZsgTtKY7XGti3iZtfsoNy3k0sR3sw2JOaqxZBlq/x9t6d3dpyj2F7zKQrNf9/PxKUe8o6rfSuB/uVMdfZyRM469oxgdpBkdoL20+b9N6A729rKAoSCKnUD6DjLy8vDbbICSst0RABoq23B07dkgB56Yl2zAWXvE06BIpVK7V72Zid+D1j+jFPzOBXTXPmi9hUuVlbY3DdMhSLTKZBjqjxwyXyrKpqcnXLJexy36G5kRx44mnerixH61mHR7L5riQiRlDmTTI8yXAn8j1+TSonhGSTeojKkwGd21/OuIQN6je7AsCefRxVErfRyDlsQCafmTdunV2KE1DZGRkZ6GQcJ6nVe/ZHx21QJLTidYqoFqbcwaY5TRnBXCb3z/g/IVOc5Y5/VYh8LJ8Z0hRpg8+4AKgB+mmDhw4kI3yoGLx4sWOTYzZPovTy7j9+7AmmcxTgo/ZmCiWyTbuoqmk0AaeHizhnHKtaNvIe5s4z9zYzGMXicDfpMK0StFlAknpkEm0fQORpF2qq6vVli1b/uk4Eps0yexXR2nvGsTmwBwv8XO0dm8kTw3MkajdN0ckE1FpJ3CKxZk5hF5ztf9PNORgSfe6nJKh6Z4vNCkqKlK5ubmZYWFhqm/fvuZxhh+nN/LTTVvQg1Lq46Q+dU5HIobTnFvaoZPZyHtx9zZHjdMGFmjIyYE+0Ar2As9nSxTQz15EhXlWckE6LKrCLiZNIekwW3v8svZSqo3NRnETMtgd9Wcdb2Xzbo5vuNn5PO2c1ZDk1FUGpUGw6LzUN42NjdIEOw5iUZwplArioVecQqmHdq8me08a3nzBJdq9JCfapFF+XZ/gAAdRrPC0o4YXyMkBJLIIO+p9acjv3bt3w5yJkrgtQ97SrvPYz4Y8w3h7G/dWOHl9J4XgqcMQSkgJLDIon6ggr0P7j6GCHA6qPORzVlaW49zS1H4arleK72gHSP/NeI3toDlWaWc1Tz+fLy4ulj8mOI64a2trHcjPz/+H/B9FW3+zRJbcMI/DubW/o63zkXb6ZXnGb+rf+1IyzSGV49b/cB1llXN3OYtH4+E4zkaCqtLS0i/kqBsGx4wYMWKcnFdKfysNOce7TFZTx3/2P1DFpIt5DN7sJLvPWsNiFRqIZ69everYhGbOnKmSk5Mbs7Oz1ebNm1V4ePinaAUnnTx5UgnYuk3XFplMqXsoWG142tLG99JtLdbuv0K+m6PeSbmc13lgmO2fm5ubKikpcWg9mpBlslnt379fZWRk2KBCu7du3ZqGTWsCpv9cW6CSp76TWWX+iv1plbYfxHMTMocZPr2VvMdeYBjL6i2U0mKeMpi9gucjiY2Elb+OBGKHHYoETYmKivoK1aSEyI7G246mxI4K056amlo9bdq0xUjmCiiS/Qlj7RPqEX28yDk1T5mzhXPmP2XOPAuqxeTm5mbR6nDc6AkvG2x+W9esWWNduHChOnjwoLyMDZ63Yx9oRW7Y4uLi7NHR0ToPpT38NesXxb9VvcGI2Hmu8xYrR/mNHewNbjvRLIwnyebJ8hyWwj2ZZ5fYNm77lwADAFucyqKTnzpaAAAAAElFTkSuQmCC'
    ];

    $('.photo-logo-step-1-file input').on('change', function(e) {
        var file = this.files[0];
        var reader = new FileReader;
        reader.onload = function(event) {
            if (file.type.match("image.*")) {
                var dataUri = event.target.result;
                var canvas = document.getElementById('photo-logo-step-2-img-editor');
                var context = canvas.getContext('2d');
                img.onload = function() {
                    imgWidth  = img.width;
                    imgHeight = img.height;
                    $('#photo-logo-step-2-img-editor').attr('width', imgWidth).attr('height', imgHeight);
                    context.clearRect(0, 0, canvas.width, canvas.height);
                    context.drawImage(img, 0, 0, imgWidth, imgHeight);

                    var logoID = $('.photo-logo-step-2-select-item').index($('.photo-logo-step-2-select-item.active'));
                    var logoImg = new Image();
                    logoImg.onload = function() {
                        var logoWidth = logoImg.width;
                        var logoHeight = logoImg.height;
                        context.drawImage(logoImg, imgWidth - logoWidth - 10, imgHeight - logoHeight - 10, logoWidth, logoHeight);
                        var imageDownload = canvas.toDataURL('image/png');
                        $('.photo-logo-step-2-download a').attr('href', imageDownload);
                        $('.photo-logo-step-2-img img').remove();
                        $('.photo-logo-step-2-img').append('<img src="' + imageDownload + '" alt="" />');
                    };
                    logoImg.src = logos[logoID];

                    $('.photo-logo-step-1').hide();
                    $('.photo-logo-step-2').show();
                };
                img.src = dataUri;
            }
        }
        reader.readAsDataURL(file);
    });

    $('.photo-logo-step-2-select-item a').click(function(e) {
        var curItem = $(this).parent();
        if (!curItem.hasClass('active')) {
            $('.photo-logo-step-2-select-item.active').removeClass('active');
            curItem.addClass('active');
            $('.photo-logo-step-1-file input').trigger('change');
        }
        e.preventDefault();
    });
    
    $('.photo-logo-step-2-other a').click(function(e) {
        $('.photo-logo-step-1').show();
        $('.photo-logo-step-2').hide();
        $('html, body').animate({'scrollTop': 0});
        e.preventDefault();
    });

});